!function(a){"use strict";if("undefined"!=typeof HOMEY_map_vars){var e,t,n="",i=HOMEY_map_vars.is_mapbox,r=HOMEY_map_vars.api_mapbox,o=HOMEY_map_vars.user_id,s=a("#listings_found"),l=HOMEY_map_vars.admin_url+"admin-ajax.php",m=HOMEY_map_vars.header_map_city,d=HOMEY_map_vars.markerPricePins,c=HOMEY_map_vars.pin_cluster,p=(HOMEY_map_vars.pin_cluster_icon,HOMEY_map_vars.pin_cluster_zoom,HOMEY_map_vars.is_singular_listing),u=HOMEY_map_vars.homey_default_radius,_=(HOMEY_map_vars.geo_country_limit,HOMEY_map_vars.geocomplete_country,0),v=new Array,y=a("#homey_halfmap_listings_container"),g=HOMEY_map_vars.default_lat,h=HOMEY_map_vars.default_lng,f=HOMEY_map_vars.arrive,E=HOMEY_map_vars.depart,O=HOMEY_map_vars.guests,M=HOMEY_map_vars.pets,b=HOMEY_map_vars.search_country,H=HOMEY_map_vars.search_city,k=HOMEY_map_vars.search_area,Y=HOMEY_map_vars.listing_type,w=HOMEY_map_vars.country,x=HOMEY_map_vars.state,z=HOMEY_map_vars.city,j=HOMEY_map_vars.area,I=HOMEY_map_vars.booking_type,Z=HOMEY_map_vars.start_time,B=HOMEY_map_vars.end_time,T=HOMEY_map_vars.min_price,S=HOMEY_map_vars.max_price,A=HOMEY_map_vars.keyword,P=HOMEY_map_vars.lat,C=HOMEY_map_vars.lng,D=HOMEY_map_vars.radius,Q=HOMEY_map_vars.bedrooms,U=HOMEY_map_vars.rooms,N=HOMEY_map_vars.room_size,W=(j=HOMEY_map_vars.area,HOMEY_map_vars.amenity),q=HOMEY_map_vars.facility,F=HOMEY_map_vars.not_found,G=(HOMEY_map_vars.infoboxClose,HOMEY_map_vars.bedrooms_icon),R=HOMEY_map_vars.bathroom_icon,V=HOMEY_map_vars.guests_icon,J=a("#securityhomeyMap").val(),K=0,X=HOMEY_ajax_vars.compare_url,$=HOMEY_ajax_vars.add_compare,aa=HOMEY_ajax_vars.remove_compare,ea=HOMEY_ajax_vars.compare_limit;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&!0;var ta=function(){if("mapbox"==i&&""!=r)var a=L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token="+r,{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:18,id:"mapbox.streets",accessToken:"your.mapbox.access.token"});else a=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'});return a},na=function(){for(var a=0;a<v.length;a++)e.removeLayer(v[a]);v=[],t&&e.removeLayer(t)},ia=function(e){a("#listing-mapzoomin").on("click",function(){var a=parseInt(e.getZoom(),10);console.log(a),++a>20&&(a=20),e.setZoom(a)})},ra=function(e){a("#listing-mapzoomout").on("click",function(){var a=parseInt(e.getZoom(),10);console.log(a),--a<0&&(a=0),e.setZoom(a)})};a("#homey-gmap-next").on("click",function(){!function(a){for(++_>v.length&&(_=1);!1===v[_-1].visible;)++_>v.length&&(_=1);a.getZoom()<15&&a.setZoom(15),a.setView(v[_-1].getLatLng()),v[_-1]._icon||v[_-1].__parent.spiderfy(),a.setZoom(20),_-1==0||_-1==v.length?setTimeout(function(){v[_-1].fire("click")},500):v[_-1].fire("click")}(e)}),a("#homey-gmap-prev").on("click",function(){!function(a){for(--_<1&&(_=v.length);!1===v[_-1].visible;)--_>v.length&&(_=1);a.getZoom()<15&&a.setZoom(15),a.setView(v[_-1].getLatLng()),v[_-1]._icon||v[_-1].__parent.spiderfy(),a.setZoom(20),_-1==0||_==v.length?setTimeout(function(){v[_-1].fire("click")},500):v[_-1].fire("click")}(e)});var oa=function(a,e){var n,i=function(a){for(var e=[],t=0;t<a.length;t++)a[t].lat&&a[t].long&&e.push([a[t].lat,a[t].long]);return e}(a);1<i.length&&e.fitBounds(i),"yes"==c&&(t=new L.MarkerClusterGroup({iconCreateFunction:function(a){var e='<div class="homey-osm-cluster">'+a.getAllChildMarkers().length+"</div>";return L.divIcon({html:e,className:"mycluster",iconSize:L.point(47,47)})},spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0}));for(var r=0;r<a.length;r++)if(a[r].lat&&a[r].long){var o=a[r],s=L.latLng(o.lat,o.long),l={riseOnHover:!0};if(o.title&&(l.title=o.title),"yes"==d){var m='<div id="infobox_popup_'+a[r].id+'" data-id="'+a[r].id+'" class="gm-marker gm-marker-color-'+a[r].term_id+'"><div class="gm-marker-price">'+a[r].price+"</div></div>",p=L.divIcon({className:"someclass",iconSize:new L.Point(0,0),html:m});n="yes"==c?new L.Marker(s,{icon:p}):L.marker(s,{icon:p}).addTo(e)}else{var u=a[r].icon,_=a[r].retinaIcon;if(u){var y={iconUrl:u,iconSize:[44,56],iconAnchor:[20,57],popupAnchor:[1,-57]};_&&(y.iconRetinaUrl=_),l.icon=L.icon(y)}n="yes"==c?new L.Marker(s,l):L.marker(s,l).addTo(e)}"yes"==c&&t.addLayer(n);var g="",h="",f="",E="";""!=a[r].bedrooms&&(g="<li>"+G+'<span class="total-beds">'+a[r].bedrooms+"</span></li>"),""!=a[r].baths&&(h="<li>"+R+'<span class="total-baths">'+a[r].baths+"</span></li>"),""!=a[r].guests&&(f="<li>"+V+'<span class="total-guests">'+a[r].guests+"</span></li>"),""!=a[r].listing_type&&(E='<li class="item-type">'+a[r].listing_type+"</li>");var O='<div id="google-maps-info-window" class="homey-open-street-map"><div class="item-wrap item-grid-view"><div class="media property-item"><div class="media-left"><div class="item-media item-media-thumb"><a href="'+a[r].url+'" class="hover-effect">'+a[r].thumbnail+'</a><div class="item-media-price"><span class="item-price">'+a[r].price+'</span></div></div></div><div class="media-body item-body clearfix"><div class="item-title-head"><div class="title-head-left"><h2 class="title"><a href="'+a[r].url+'">'+o.title+'</a></h2><address class="item-address">'+a[r].address+'</address></div></div><ul class="item-amenities">'+g+h+f+E+"</ul></div></div></div></div>";v.push(n),n.bindPopup(O)}"yes"==c&&e.addLayer(t)},sa=function(e,t,n,i,r,o,s,l,m,d){var c=a("#homey-halfmap");f=e.find('input[name="arrive"]').val(),E=e.find('input[name="depart"]').val(),O=e.find('input[name="guest"]').val(),A=e.find('input[name="keyword"]').val(),M=e.find('input[name="pets"]:checked').val(),k=e.find('input[name="search_area"]').val(),H=e.find('input[name="search_city"]').val(),b=e.find('input[name="search_country"]').val(),P=e.find('input[name="lat"]').val(),C=e.find('input[name="lng"]').val(),D=e.find('input[name="radius"]').val(),I=e.find('input[name="booking_type"]').val(),Y=e.find('select[name="listing_type"]').val(),w=e.find('select[name="country"]').val(),x=e.find('select[name="state"]').val(),z=e.find('select[name="city"]').val(),j=e.find('select[name="area"]').val(),Z=e.find('select[name="start"]').val(),B=e.find('select[name="end"]').val(),""!=Y&&null!=Y||(Y=c.data("type")),""!=I&&null!=I||(I=c.data("booking_type")),W=e.find(".amenities-list input[type=checkbox]:checked").map(function(e,t){return a(t).val()}).toArray(),q=e.find(".facilities-list input[type=checkbox]:checked").map(function(e,t){return a(t).val()}).toArray(),T=e.find('select[name="min-price"]').val(),S=e.find('select[name="max-price"]').val(),Q=e.find('select[name="bedrooms"]').val(),U=e.find('select[name="rooms"]').val(),N=e.find('select[name="room_size"]').val();var p=a("#sort_listings_halfmap").val();null!=t&&(K=t);la(n,i,r,o,s,l,m,d,{action:"homey_half_map",arrive:f,depart:E,guest:O,keyword:A,pets:M,bedrooms:Q,rooms:U,room_size:N,search_country:b,search_city:H,search_area:k,listing_type:Y,"min-price":T,"max-price":S,country:w,search_lat:P,search_lng:C,radius:D,state:x,city:z,area:j,booking_type:I,start_hour:Z,end_hour:B,amenity:W,facility:q,sort_by:p,layout:Ha,num_posts:ka,paged:t,security:J},"")},la=function(t,n,i,r,d,c,u,_,v,f){if(null!=document.getElementById(i)){if(c||(c=14),!u)u=0;var E,O="";_?E="homey_half_map":(E="homey_header_map","lat_long"==f||"city"==f&&(O=m));var M={dragging:!0,center:L.latLng(t,n),zoom:10,tap:!0},b=L.DomUtil.get(i);if(null!=b&&(b._leaflet_id=null),(e=L.map(i,M)).scrollWheelZoom.disable(),e.addLayer(ta()),_)var H=v;else H={action:E,map_cities:O,security:J};!function(t,n){a.ajax({url:t,dataType:"json",method:"POST",data:n,beforeSend:function(){a("#homey-map-loading").show(),_&&y.empty().append('<div id="homey-map-loading"><div class="mapPlaceholder"><div class="loader-ripple spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div></div></div>')},success:function(n){var i;!0===n.getListings?(na(),oa(n.listings,e),_&&(y.empty().html(n.listingHtml),s.empty().html(n.total_results)),homey_init_add_favorite(t,o,p),homey_init_remove_favorite(t,o,p),i=homeyGetCookie("homey_compare_listings"),add_to_compare(X,$,aa,ea,i,4),remove_from_compare(i,$,aa),_&&(xa(),a(".half-map-left-wrap, .half-map-right-wrap").animate({scrollTop:0},"slow")),a("#homey-map-loading").hide()):(na(),e.setCenter(new google.maps.LatLng(g,h)),a("#homey-halfmap").append('<div class="map-notfound">'+F+"</div>"),y.empty().html('<div class="map-notfound">'+F+"</div>"),s.empty().html(n.total_results))},error:function(a){console.log(a)}})}(l,H),document.getElementById("listing-mapzoomin")&&ia(e),document.getElementById("listing-mapzoomout")&&ra(e)}else console.log("No map element found")};if(a("#banner-map").length>0){var ma=(ga=a("#banner-map")).data("zoomlevel"),da=ga.data("maptype");ga.data("lat"),ga.data("long");la(_a="",va="",ha="banner-map",Ma="infobox",Ea=!0,fa=ma,La=0,ba=!1,null,da)}if(a("#homey-single-map").length>0){ma=(ga=a("#homey-single-map")).data("zoom");var ca=ga.data("pin-type"),pa=ga.data("marker-pin"),ua=ga.data("marker-pin-retina"),_a=ga.data("lat"),va=ga.data("long");if("marker"==ca)var ya=!1;else ya=!0;!function(a,t,n,i,r,o,s,l){i||(i=!1),r||(r=!1),o||(o=15);var m,d={riseOnHover:!0},c=function(a){if(s){var e={iconUrl:s,iconSize:[44,56],iconAnchor:[20,57],popupAnchor:[1,-57]};l&&(e.iconRetinaUrl=l),d.icon=L.icon(e)}L.marker(m,d).addTo(a)},p=function(a){L.circle(m,200).addTo(a)};!function(a){var t={dragging:i,center:a,zoom:o,tap:!1},s=document.getElementById(n);(e=L.map(s,t)).scrollWheelZoom.disable(),e.addLayer(ta()),r||c(e),r&&p(e)}(m=L.latLng(a,t))}(_a,va,ha="homey-single-map",!1,ya,fa=ma,pa,ua)}if(a("#homey_sticky_map").length>0){var ga=a("#homey_sticky_map"),ha="homey_sticky_map",fa=12,Ea=!0,Oa=ga.data("mappaged");!function(t,n,i,r){if(null!=document.getElementById(t)){i||(i=14);var o={dragging:!0,center:L.latLng("",""),zoom:10,tap:!0},s=L.DomUtil.get(t);null!=s&&(s._leaflet_id=null),(e=L.map(t,o)).scrollWheelZoom.disable(),e.addLayer(ta()),!function(t,n){a.ajax({url:t,dataType:"json",method:"POST",data:n,success:function(t){!0===t.getListings&&(na(),oa(t.listings,e),a("#homey-map-loading").hide())},error:function(a){console.log(a)}})}(l,{action:"homey_sticky_map",paged:r,security:J}),document.getElementById("listing-mapzoomin")&&ia(e),document.getElementById("listing-mapzoomout")&&ra(e)}else console.log("No map element found")}(ha,0,fa,Oa)}if(a("#homey-halfmap").length>0){ma=(ga=a("#homey-halfmap")).data("zoom");var Ma,ba,La,Ha=ga.data("layout"),ka=ga.data("num-posts"),Ya=ga.data("order"),wa=ga.data("type");I=ga.data("booking_type");""==Y&&(Y=wa),la(_a="",va="",ha="homey-halfmap",Ma="infobox",Ea=!0,fa=ma,La=0,ba=!0,{action:"homey_half_map",arrive:f,depart:E,guest:O,keyword:A,pets:M,bedrooms:Q,rooms:U,room_size:N,search_country:b,search_city:H,search_area:k,listing_type:Y,"min-price":T,"max-price":S,country:w,state:x,city:z,area:j,booking_type:I,search_lat:P,search_lng:C,radius:D,start_hour:Z,end_hour:B,amenity:W,facility:q,layout:Ha,num_posts:ka,sort_by:Ya,paged:K,security:J},da=""),a(".homey_half_map_search_btn").on("click",function(e){e.preventDefault();var t=a(this).parents(".half-map-wrap");sa(t,1,_a,va,ha,Ma,Ea,fa,La,ba)}),a("#sort_listings_halfmap").on("change",function(e){e.preventDefault();var t=a(this).parents(".half-map-wrap");sa(t,1,_a,va,ha,Ma,Ea,fa,La,ba)});var xa=function(){return a(".half_map_ajax_pagi a").on("click",function(e){e.preventDefault();var t=a(this).data("homeypagi"),n=a(this).parents(".half-map-wrap");sa(n,t,_a,va,ha,Ma,Ea,fa,La,ba)}),!1};a("#radius-range-slider").length>0&&(ja=u,a("#radius-range-slider").slider({value:ja,min:0,max:100,step:1,slide:function(e,t){a("#radius-range-text").html(t.value),a("#radius-range-value").val(t.value)},stop:function(e,t){var n=a(this).parents(".half-map-wrap");sa(n,1,_a,va,ha,Ma,Ea,fa,La,ba)}}),a("#radius-range-text").html(a("#radius-range-slider").slider("value")),a("#radius-range-value").val(a("#radius-range-slider").slider("value")))}a("input.input-search").length>0&&jQuery("input.input-search").autocomplete({source:function(a,e){jQuery.get("https://nominatim.openstreetmap.org/search",{format:"json",q:a.term},function(a){a.length?e(a.map(function(a){var e={label:a.display_name,latitude:a.lat,longitude:a.lon,value:a.display_name};return void 0!==a.address&&(e.county=a.address.county),void 0!==a.address&&(e.city=a.address.city),void 0!==a.address&&(e.state=a.address.state),void 0!==a.address&&(e.country=a.address.country),void 0!==a.address&&(e.zip=a.address.postcode),void 0!==a.address&&(e.country_short=a.address.country_code),e})):e([{value:"",label:"there are no results"}])},"json")},select:function(e,t){a('input[name="lat"]').val(t.item.latitude),a('input[name="lng"]').val(t.item.longitude),a('input[name="search_area"]').attr("data-value",""),a('input[name="search_area"]').val(""),a('input[name="search_city"]').attr("data-value",t.item.city),a('input[name="search_city"]').val(t.item.city),a('input[name="search_country"]').attr("data-value",t.item.country),a('input[name="search_country"]').val(t.item.country)}});!function(){if(0!==jQuery("#map").length){var t=a("#map"),i=t.data("add-lat"),r=t.data("add-long");""!==i&&void 0!==i||(i=25.68654),""!==r&&void 0!==r||(r=-80.431345),i=parseFloat(i),r=parseFloat(r);var o=L.latLng(i,r);(e=L.map("map",{center:o,zoom:15})).scrollWheelZoom.disable();var s=ta();e.addLayer(s),(n=L.marker(o,{riseOnHover:!0,draggable:!0}).addTo(e)).on("drag",function(a){document.getElementById("lat").value=n.getLatLng().lat,document.getElementById("lng").value=n.getLatLng().lng})}}();var za=function(a,t){var i=L.latLng(a,t);n.setLatLng(i),e.invalidateSize(),e.panTo(new L.LatLng(a,t)),document.getElementById("lat").value=a,document.getElementById("lng").value=t};a("#find").on("click",function(e){event.preventDefault();var t=a("#listing_address").val().replace(/\n/g,",").replace(/,,/g,",");t&&a.get("https://nominatim.openstreetmap.org/search",{format:"json",q:t,limit:1},function(a){1===a.length&&za(a[0].lat,a[0].lon)},"json")});jQuery("#listing_address").autocomplete({source:function(a,e){jQuery.get("https://nominatim.openstreetmap.org/search",{format:"json",q:a.term,addressdetails:"1"},function(a){a.length?e(a.map(function(a){var e={label:a.display_name,latitude:a.lat,longitude:a.lon,value:a.display_name};return void 0!==a.address&&(e.county=a.address.county),void 0!==a.address&&(e.city=a.address.city),void 0!==a.address&&(e.state=a.address.state),void 0!==a.address&&(e.country=a.address.country),void 0!==a.address&&(e.zip=a.address.postcode),void 0!==a.address&&(e.country_short=a.address.country_code),e})):e([{value:"",label:"there are no results"}])},"json")},select:function(e,t){var n=t.item.latitude,i=t.item.longitude;a("#zip").val(t.item.zip),a("#countyState").val(t.item.county),a("#city").val(t.item.city),a("#homey_country").val(t.item.country),a('input[name="country_short"]').val(t.item.country_short),za(n,i),a("#city, #countyState, #area, #homey_country").selectpicker("refresh")}})}var ja}(jQuery);